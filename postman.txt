# GU√çA DE POSTMAN - VISE Payment API
# Servidor: http://localhost:3000

========================================
üìã ENDPOINTS DISPONIBLES
========================================

## 1. HEALTH CHECK
GET http://localhost:3000/health
Headers: Content-Type: application/json

Response:
{
    "status": "OK",
    "timestamp": "2025-11-14T00:30:00.000Z",
    "service": "VISE Payment API",
    "version": "1.0.0"
}

========================================
ÔøΩ PASOS CORRECTOS PARA USAR LA API
========================================

‚ö†Ô∏è IMPORTANTE: Seguir este orden exacto:

1. PRIMERO: Registrar un cliente con POST /client
2. SEGUNDO: Verificar que el cliente se registr√≥ con GET /client
3. TERCERO: Procesar compras con POST /purchase
4. CUARTO: Ver compras del cliente con GET /purchase/client/:id
5. QUINTO: Actualizar cliente con PUT /client/:id (NUEVO)
6. SEXTO: Eliminar cliente con DELETE /client/:id (NUEVO)

========================================
ÔøΩüë§ CLIENTES (CLIENT ROUTES) - CORREGIDO
========================================

## 2. REGISTRAR CLIENTE (HACER PRIMERO)
POST http://localhost:3000/client
Headers: Content-Type: application/json

Body (JSON):
{
    "name": "Juan P√©rez",
    "country": "Colombia",
    "monthlyIncome": 2500,
    "viseClub": true,
    "cardType": "Platinum"
}

Otros ejemplos de clientes:

### Cliente Classic
{
    "name": "Mar√≠a Garc√≠a",
    "country": "M√©xico",
    "monthlyIncome": 800,
    "viseClub": false,
    "cardType": "Classic"
}

### Cliente Gold
{
    "name": "Carlos Rodr√≠guez",
    "country": "Argentina",
    "monthlyIncome": 1500,
    "viseClub": true,
    "cardType": "Gold"
}

### Cliente Black
{
    "name": "Ana Silva",
    "country": "Brasil",
    "monthlyIncome": 5000,
    "viseClub": true,
    "cardType": "Black"
}

### Cliente White
{
    "name": "Luis Martinez",
    "country": "Espa√±a",
    "monthlyIncome": 8000,
    "viseClub": true,
    "cardType": "White"
}

## 3. OBTENER TODOS LOS CLIENTES
GET http://localhost:3000/client
Headers: Content-Type: application/json

## 4. OBTENER CLIENTE POR ID
GET http://localhost:3000/client/1
Headers: Content-Type: application/json

## 5. ACTUALIZAR CLIENTE
PUT http://localhost:3000/client/1
Headers: Content-Type: application/json

Body (JSON):
{
    "name": "Juan P√©rez Actualizado",
    "country": "Colombia",
    "monthlyIncome": 3000,
    "viseClub": true,
    "cardType": "Black"
}

### Ejemplo: Cambiar de Classic a Gold
PUT http://localhost:3000/client/2
{
    "name": "Mar√≠a Garc√≠a",
    "country": "M√©xico",
    "monthlyIncome": 1200,
    "viseClub": true,
    "cardType": "Gold"
}

### Ejemplo: Actualizar solo ingresos
PUT http://localhost:3000/client/3
{
    "name": "Carlos Rodr√≠guez",
    "country": "Argentina",
    "monthlyIncome": 2000,
    "viseClub": true,
    "cardType": "Platinum"
}

## 6. ELIMINAR CLIENTE
DELETE http://localhost:3000/client/1
Headers: Content-Type: application/json

‚ö†Ô∏è NOTA: Al eliminar un cliente, tambi√©n se eliminan todas sus compras asociadas.

========================================
üí≥ COMPRAS (PURCHASE ROUTES)
========================================

## 7. PROCESAR COMPRA
POST http://localhost:3000/purchase
Headers: Content-Type: application/json

Body (JSON):
{
    "clientId": 1,
    "amount": 250,
    "currency": "USD",
    "purchaseDate": "2025-11-14T14:30:00Z",
    "purchaseCountry": "France"
}

NOTA IMPORTANTE: 
- El clientId debe existir (registrar cliente primero)
- No necesitas enviar cardType, se obtiene autom√°ticamente del cliente
- purchaseCountry determina si es compra internacional
- purchaseDate se usa para calcular descuentos por d√≠a de la semana

Otros ejemplos de compras:

### Compra Nacional
{
    "clientId": 1,
    "amount": 150,
    "currency": "USD",
    "purchaseDate": "2025-11-16T10:00:00Z",
    "purchaseCountry": "Colombia"
}

### Compra de S√°bado (para descuento)
{
    "clientId": 2,
    "amount": 300,
    "currency": "EUR",
    "purchaseDate": "2025-11-16T15:30:00Z",
    "purchaseCountry": "Spain"
}

### Compra Internacional Grande
{
    "clientId": 3,
    "amount": 1200,
    "currency": "USD",
    "purchaseDate": "2025-11-14T09:15:00Z",
    "purchaseCountry": "Japan"
}

## 8. OBTENER TODAS LAS COMPRAS
GET http://localhost:3000/purchase
Headers: Content-Type: application/json

## 9. OBTENER COMPRAS POR CLIENTE (CORREGIDO)
GET http://localhost:3000/purchase/client/1
Headers: Content-Type: application/json

## 10. OBTENER COMPRA POR ID
GET http://localhost:3000/purchase/1
Headers: Content-Type: application/json

## 11. ACTUALIZAR COMPRA
PUT http://localhost:3000/purchase/1
Headers: Content-Type: application/json

Body (JSON):
{
    "amount": 300,
    "currency": "EUR",
    "purchaseDate": "2025-11-15T10:00:00Z",
    "purchaseCountry": "Germany"
}

### Ejemplo: Corregir moneda de compra
PUT http://localhost:3000/purchase/2
{
    "amount": 150,
    "currency": "COP",
    "purchaseDate": "2025-11-14T14:30:00Z",
    "purchaseCountry": "Colombia"
}

### Ejemplo: Cambiar pa√≠s de compra
PUT http://localhost:3000/purchase/3
{
    "amount": 500,
    "currency": "USD",
    "purchaseDate": "2025-11-16T15:30:00Z",
    "purchaseCountry": "Canada"
}

## 12. ELIMINAR COMPRA
DELETE http://localhost:3000/purchase/1
Headers: Content-Type: application/json

## 13. ELIMINAR TODAS LAS COMPRAS DE UN CLIENTE
DELETE http://localhost:3000/purchase/client/1
Headers: Content-Type: application/json

========================================
üè† RUTA PRINCIPAL
========================================

## 14. INFORMACI√ìN DE LA API
GET http://localhost:3000/
Headers: Content-Type: application/json

Response:
{
    "message": "Bienvenido a la API de Pagos VISE",
    "version": "1.0.0",
    "endpoints": {
        "POST /client": "Registrar un nuevo cliente",
        "GET /client": "Obtener todos los clientes",
        "GET /client/:id": "Obtener un cliente por ID",
        "PUT /client/:id": "Actualizar un cliente",
        "DELETE /client/:id": "Eliminar un cliente",
        "POST /purchase": "Procesar una compra",
        "GET /purchase": "Obtener todas las compras",
        "GET /purchase/:id": "Obtener una compra por ID",
        "GET /purchase/client/:clientId": "Obtener compras de un cliente",
        "PUT /purchase/:id": "Actualizar una compra",
        "DELETE /purchase/:id": "Eliminar una compra",
        "DELETE /purchase/client/:clientId": "Eliminar todas las compras de un cliente",
        "GET /health": "Estado de la API"
    }
}

========================================
üìù TIPOS DE TARJETAS DISPONIBLES
========================================

1. Classic - Ingreso m√≠nimo: $300
2. Gold - Ingreso m√≠nimo: $1000 + VISE Club
3. Platinum - Ingreso m√≠nimo: $2000 + VISE Club
4. Black - Ingreso m√≠nimo: $4000 + VISE Club
5. White - Ingreso m√≠nimo: $7000 + VISE Club

========================================
üéØ BENEFICIOS POR TARJETA
========================================

Classic: Sin restricciones especiales
Gold: Descuento 10% compras internacionales
Platinum: Descuento 30% los s√°bados
Black: No puede comprar desde China, descuento 5% todas las compras
White: Descuento 15% compras > $1000

========================================
üîß CONFIGURACI√ìN DE POSTMAN
========================================

1. Crear nueva Collection: "VISE Payment API"
2. Configurar variables:
   - baseUrl: http://localhost:3000
   - contentType: application/json

3. Headers globales:
   - Content-Type: application/json
   - Accept: application/json

========================================
‚ùå CASOS DE ERROR PARA PROBAR
========================================

## Cliente NO APTO para Platinum (sin VISE Club)
POST http://localhost:3000/client
{
    "name": "Test User",
    "country": "USA",
    "monthlyIncome": 3000,
    "viseClub": false,
    "cardType": "Platinum"
}

## Cliente NO APTO por ingresos bajos
POST http://localhost:3000/client
{
    "name": "Test User 2",
    "country": "USA",
    "monthlyIncome": 200,
    "viseClub": false,
    "cardType": "Classic"
}

## Compra desde China con tarjeta Black (RECHAZADA)
POST http://localhost:3000/purchase
{
    "clientId": 4,
    "amount": 500,
    "currency": "USD",
    "purchaseDate": "2025-11-14T14:30:00Z",
    "purchaseCountry": "China"
}

## Actualizar cliente que no existe
PUT http://localhost:3000/client/999
{
    "name": "No Existe",
    "country": "USA",
    "monthlyIncome": 3000,
    "viseClub": true,
    "cardType": "Gold"
}

## Eliminar cliente que no existe
DELETE http://localhost:3000/client/999

## Actualizar compra que no existe
PUT http://localhost:3000/purchase/999
{
    "amount": 300,
    "currency": "USD",
    "purchaseDate": "2025-11-15T10:00:00Z",
    "purchaseCountry": "USA"
}

## Eliminar compra que no existe
DELETE http://localhost:3000/purchase/999

## Actualizar cliente con datos inv√°lidos (ingresos insuficientes)
PUT http://localhost:3000/client/1
{
    "name": "Juan P√©rez",
    "country": "Colombia",
    "monthlyIncome": 500,
    "viseClub": false,
    "cardType": "Black"
}

========================================
üìä RESPUESTAS ESPERADAS
========================================

‚úÖ Cliente Registrado Exitosamente:
{
    "clientId": 1,
    "name": "Juan P√©rez",
    "cardType": "Platinum",
    "status": "Registered",
    "message": "Cliente apto para tarjeta Platinum"
}

‚úÖ Compra Aprobada:
{
    "status": "Approved",
    "purchase": {
        "clientId": 1,
        "originalAmount": 250,
        "discountApplied": 75,
        "finalAmount": 175,
        "benefit": "S√°bado - Descuento 30%"
    }
}

‚úÖ Cliente Actualizado Exitosamente:
{
    "status": "Updated",
    "clientId": 1,
    "message": "Cliente actualizado correctamente",
    "changes": {
        "cardType": "Black",
        "monthlyIncome": 3000
    }
}

‚úÖ Cliente Eliminado:
{
    "status": "Deleted",
    "clientId": 1,
    "message": "Cliente eliminado correctamente",
    "purchasesDeleted": 5
}

‚úÖ Compra Actualizada:
{
    "status": "Updated",
    "purchaseId": 1,
    "message": "Compra actualizada correctamente",
    "newBenefit": "Compra Nacional - Sin descuento especial",
    "finalAmount": 300
}

‚úÖ Compra Eliminada:
{
    "status": "Deleted",
    "purchaseId": 1,
    "message": "Compra eliminada correctamente"
}

‚ùå Error - Cliente no encontrado:
{
    "status": "Error",
    "error": "Cliente no encontrado",
    "clientId": 999
}

‚ùå Error - No apto para actualizaci√≥n:
{
    "status": "Rejected",
    "error": "El cliente no cumple con los requisitos para tarjeta Black",
    "requirements": {
        "monthlyIncome": "M√≠nimo $4000",
        "viseClub": "Requerido"
    }
}

========================================
üîß FLUJOS DE PRUEBA RECOMENDADOS
========================================

### Flujo Completo CRUD - Clientes:
1. POST /client (crear)
2. GET /client/:id (leer)
3. PUT /client/:id (actualizar)
4. GET /client/:id (verificar cambios)
5. DELETE /client/:id (eliminar)
6. GET /client/:id (verificar eliminaci√≥n)

### Flujo Completo CRUD - Compras:
1. POST /client (crear cliente primero)
2. POST /purchase (crear compra)
3. GET /purchase/:id (leer compra)
4. PUT /purchase/:id (actualizar)
5. GET /purchase/:id (verificar cambios)
6. DELETE /purchase/:id (eliminar)
7. GET /purchase/:id (verificar eliminaci√≥n)

### Flujo de Actualizaci√≥n de Tarjeta:
1. POST /client (Classic)
2. PUT /client/:id (Gold)
3. PUT /client/:id (Platinum)
4. PUT /client/:id (Black)
5. PUT /client/:id (White)
