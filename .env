# Grafana Cloud OTLP example - replace <GRAFANA_API_KEY> with your key

OTEL_EXPORTER=otlp
OTEL_TRACES_EXPORTER=otlp
OTEL_EXPORTER_OTLP_ENDPOINT=https://otlp-gateway-prod-us-east-2.grafana.net/otlp
OTEL_EXPORTER_OTLP_ENDPOINT_METRICS=https://otlp-gateway-prod-us-east-2.grafana.net/otlp

# Generate Base64 of your Grafana key WITH A TRAILING COLON and use it below.
# PowerShell (replace glc_... with your key):
# $b=[Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes("glc_...:")); $env:OTEL_EXPORTER_OTLP_HEADERS="Authorization=Basic $b"; (Get-Content .env) -replace 'OTEL_EXPORTER_OTLP_HEADERS=.*','OTEL_EXPORTER_OTLP_HEADERS=Authorization=Basic ' + $b | Set-Content .env
#
# Bash (replace glc_... with your key):
# b=$(printf 'glc_...:' | base64); sed -i "s|^OTEL_EXPORTER_OTLP_HEADERS=.*|OTEL_EXPORTER_OTLP_HEADERS=Authorization=Basic $b|" .env

OTEL_EXPORTER_OTLP_HEADERS=Authorization=Basic <BASE64_ENCODED_APIKEY_WITH_COLON>

OTEL_RESOURCE_ATTRIBUTES=service.name=targeta-api,service.namespace=my-application-group,deployment.environment=production
OTEL_NODE_RESOURCE_DETECTORS=env,host,os

# Note: NODE_OPTIONS must be exported in the shell before starting node if you need --require.
# Example (PowerShell): $env:NODE_OPTIONS="--require @opentelemetry/auto-instrumentations-node/register"; npm start

OTEL_SERVICE_NAME=targeta-api
OTEL_SERVICE_VERSION=1.0.0

# Comandos rápidos para actualizar el remoto con tu código local (sustituye <tu-rama>):
# 1) Verificar rama y estado:
#    git branch --show-current
#    git status
# 2) Añadir y commitear:
#    git add .
#    git commit -m "mensaje descriptivo"
# 3) Traer y rebasear desde remoto (PowerShell use ';' como separador):
#    git fetch origin; git pull --rebase origin <tu-rama>
# 4) Subir la rama:
#    git push origin <tu-rama>
# 5) Si reescribiste historial (rebase), forzar de forma segura:
#    git push --force-with-lease origin <tu-rama>
